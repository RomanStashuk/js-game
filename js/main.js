!function(){"use strict";function t(t,e){return Math.floor(Math.random()*(e-t)+t)}function e(t){t.classList.remove("visually-hidden")}function i(t){t.classList.add("visually-hidden")}class s{constructor(t){this.root=t,this.startBtn=this.root.querySelector("#startBtn"),this.gameField=this.root.querySelector("#game"),this.remainingTime=this.root.querySelector("#time"),this.score=this.root.querySelector("#score"),this.timeHeader=this.root.querySelector(".app__time"),this.scoreHeader=this.root.querySelector(".app__score"),this.timeInput=this.root.querySelector("#game-time"),this.isStarted=!1,this.currentScore=0,this._onBoxClick=this._onBoxClick.bind(this),this._onStartBtnClick=this._onStartBtnClick.bind(this),this.setScore=this.setScore.bind(this),this.setTime=this.setTime.bind(this),this.renderBox=this.renderBox.bind(this),this.finish=this.finish.bind(this)}_onStartBtnClick(){this.currentScore=0,this.isStarted=!0,this.gameField.style.backgroundColor="#ffffff",i(this.startBtn),this.timeInput.setAttribute("disabled","true");const t=setInterval((()=>{const e=parseFloat(this.remainingTime.textContent);e<=0?(clearInterval(t),this.finish()):this.remainingTime.textContent=(e-.1).toFixed(1)}),100);this.setTime(),this.renderBox()}_onBoxClick(t){this.isStarted&&t.target.dataset.box&&(this.currentScore++,this.renderBox())}init(){this.startBtn.addEventListener("click",this._onStartBtnClick),this.gameField.addEventListener("click",this._onBoxClick),this.timeInput.addEventListener("input",this.setTime)}setScore(){this.score.textContent=this.currentScore.toString()}setTime(){const t=+this.timeInput.value;this.remainingTime.textContent=t.toFixed(1),e(this.timeHeader),i(this.scoreHeader)}finish(){this.isStarted=!1,e(this.startBtn),this.gameField.innerHTML="",this.gameField.style.backgroundColor="#cccccc",i(this.timeHeader),e(this.scoreHeader),this.timeInput.removeAttribute("disabled"),this.setScore()}renderBox(){this.gameField.innerHTML="";const e=document.createElement("div"),i=t(30,100),s=this.gameField.getBoundingClientRect(),r=s.height-i,n=s.width-i;e.style.height=e.style.width=i+"px",e.style.position="absolute",e.style.backgroundColor=`rgba(\n      ${t(1,255)},\n      ${t(1,255)},\n      ${t(1,255)}\n    )`,e.style.top=t(0,r)+"px",e.style.left=t(0,n)+"px",e.style.cursor="pointer",e.setAttribute("data-box","true"),this.gameField.insertAdjacentElement("afterbegin",e)}}document.querySelectorAll(".app").forEach((t=>{new s(t).init()}))}();